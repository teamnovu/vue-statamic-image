var StatamicImage=function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e,r,n,i,o,a,s,c,u){"boolean"!=typeof a&&(c=s,s=a,a=!1);const l="function"==typeof r?r.options:r;let d;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),n&&(l._scopeId=n),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=d):e&&(d=a?function(t){e.call(this,u(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),d)if(l.functional){const t=l.render;l.render=function(e,r){return d.call(r),t(e,r)}}else{const t=l.beforeCreate;l.beforeCreate=t?[].concat(t,d):[d]}return r}var s=a({render:function(){var t=this.$createElement;return(this._self._c||t)("img",{ref:"imageRef",attrs:{src:this.originalUrl,srcset:this.imgSrcSet,sizes:this.sizes,width:"100%"},on:{load:this.onLoaded}})},staticRenderFns:[]},void 0,{props:{src:{required:!0,type:String},quality:{required:!1,type:Number,default:70},blur:{required:!1,type:Number},fit:{required:!1,type:String},crop:{required:!1,type:String},format:{required:!1,type:String},fallbackWidth:{required:!1,type:Number},aspectRatio:{required:!1,type:Number},placeholderBlur:{required:!1,default:100,type:Number},placeholderQuality:{required:!1,default:30,type:Number},placeholderWidth:{required:!1,type:Number,default:400},usePlaceholder:{required:!1,default:!0,type:Boolean},placeholderDataUrl:{required:!1,type:String}},data:function(){return{sizes:"1px",isLoading:!0}},created:function(){var t=Object.entries(this.$screenSizes).map((function(t){var e=i(t,2),r=e[0],n=e[1];return{breakpoint:r,media:"min-width: ".concat(n),size:n}})).sort((function(t,e){return+e.size.replace("px","")-+t.size.replace("px","")}));this.screens=t},mounted:function(){window.addEventListener("resize",this.onResize,{passive:!0})},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{updateSizes:function(){var t=this;return new Promise((function(e){window.requestAnimationFrame((function(){var r=t.$refs.imageRef.getBoundingClientRect().width,n=Math.ceil(r/window.innerWidth*100);t.sizes="".concat(n,"vw"),e()}))}))},onResize:function(){this.updateSizes()},onLoaded:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateSizes();case 2:e.isLoading=!1;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,c,"next",t)}function c(t){r(a,i,o,s,c,"throw",t)}s(void 0)}))})()},generateSrc:function(t){var e=t.quality,r=t.width,n=t.aspectRatio,i=t.blur,o=(t.addSrcSetWidth,t.fit),a=t.crop,s=t.format,c="".concat(this.$statamicAssetUrl).concat(this.src,"?");return r&&(c+="&w=".concat(r)),r&&n&&(c+="&h=".concat(Math.round(r/n))),e&&(c+="&q=".concat(e)),i&&(c+="&blur=".concat(i)),o&&(c+="&fit=".concat(o)),a&&(c+="&fit=".concat(a)),s&&(c+="&format=".concat(s)),c}},computed:{imgSrcSet:function(){var t=this,e=this.screens.map((function(t){return t.size.replace("px","")})).map((function(e){return t.generateSrc({width:e,quality:t.quality,fit:t.fit,format:t.format,crop:t.crop,aspectRatio:t.aspectRatio})+" ".concat(e,"w")}));return this.usePlaceholder&&e.push(this.placeholderUrl+" 32w"),e.join(",")},originalUrl:function(){return this.generateSrc({quality:this.quality,blur:this.blur,width:this.fallbackWidth,fit:this.fit,format:this.format,aspectRatio:this.aspectRatio,crop:this.crop})},placeholderUrl:function(){var t;return this.placeholderDataUrl&&!this.aspectRatio?this.placeholderDataUrl:this.generateSrc((n(t={blur:this.placeholderBlur,aspectRatio:this.aspectRatio,quality:this.placeholderQuality,width:this.placeholderWidth,fit:this.fit,format:this.format},"aspectRatio",this.aspectRatio),n(t,"crop",this.crop),t))}}},void 0,!1,void 0,!1,void 0,void 0,void 0),c={xs:"320px",sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1600px","3xl":"2000px"},u=function(t,r){if(!u.installed){u.installed=!0;var n,i=r.screenSizes,o=r.statamicAssetUrl;if(i&&("object"===e(n=i)&&null!==n)&&0!==Object.keys(i).length||(i=c),!o||"string"===!e(o)||!o instanceof String||0===o.length)throw new Error("Statamic asset url was not properly configured.");t.prototype.$screenSizes=i,t.prototype.$statamicAssetUrl=o,t.component("StatamicImage",s)}},l={install:u},d=null;return"undefined"!=typeof window?d=window.Vue:"undefined"!=typeof global&&(d=global.Vue),d&&d.use(l),s.install=u,t.default=s,Object.defineProperty(t,"__esModule",{value:!0}),t}({});